Модули для подмены адреса
rewrite <regex> <final> [flag]

    regex — regexp для разбора исходной строки запроса;
    final — финальный вид строки запроса;
    flag — флаги для rewrite, которые влияют на последующее поведение nginx.
server {
    listen 80;
    server_name example.com;
    
    rewrite ^/download/(.*)$ /static/$1;
    
    location /static/ {
        return 200;
    }
}

Флаги в конце строки

 redirect — если вы используете этот флаг, то   rewrite после изменения запроса вернет пользователю новый url с кодом 302 (временный редирект).
 permanent — данный флаг также вернет пользователю новый url, но с кодом 301 (постоянный редирект).
 last — данная директива указывает, что это последнее rewrite правило, которое нужно обработать, и после обработки nginx пойдет искать новый location соответствующий измененному запросу.
 break — если используется внутри location, то данный флаг укажет nginx, что необходимо прекратить обработку rewrite правил, но при этом искать новый location не требуется — следует продолжать выполнение в текущем location.

Также стоит отметить, что если при перезаписи вы указываете аргументы к запросу, то они будут добавлены к уже существующим аргументам. Допустим, у нас есть примерно такое правило:

    rewrite ^/download/(.*)$ /get.php?file=$1

Тогда запрос вида http://example.com/download/test.zip?ts=123 будет преобразован в http://example.com/get.php?ts=123&file=test.zip. То есть, наш параметр file=test.zip был добавлен к аргументам исходного запроса. Чтобы исключить это поведение, необходимо добавить в конце rewrite вопросительный знак:

    rewrite ^/download/(.*)$ /get.php?file=$1?

Тогда запрос http://example.com/download/test.zip?ts=123 будет преобразован в http://example.com/get.php?file=test.zip.
